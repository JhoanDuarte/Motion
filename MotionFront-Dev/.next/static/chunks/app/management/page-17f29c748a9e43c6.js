(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[393],{6132:(e,a,n)=>{Promise.resolve().then(n.bind(n,1277))},5601:(e,a,n)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e,a){for(var n in a)Object.defineProperty(e,n,{enumerable:!0,get:a[n]})}(a,{default:function(){return o},getImageProps:function(){return r}});let t=n(9920),i=n(497),s=n(8173),c=t._(n(1241));function r(e){let{props:a}=(0,i.getImgProps)(e,{defaultLoader:c.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,n]of Object.entries(a))void 0===n&&delete a[e];return{props:a}}let o=s.Image},1277:(e,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>b});var t=n(7437),i=n(2289),s=n.n(i),c=n(5601),r=n.n(c),o=n(231),l=n.n(o),d=n(2265),m=n(357);let _=async()=>{let e=await fetch("".concat(m.env.NEXT_PUBLIC_API_URL,"/records"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("A\xfan no hay registros disponibles");return(await e.json()).reverse()},h=async e=>{let a=e.id?"".concat(m.env.NEXT_PUBLIC_API_URL,"/records/").concat(e.id):"".concat(m.env.NEXT_PUBLIC_API_URL,"/records"),n=e.id?"PUT":"POST",t=await fetch(a,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify({brand:e.brand,location:e.location,candidate:e.candidate})});if(!t.ok)throw Error("Error al ".concat(e.id?"actualizar":"crear"," el registro"));return await t.json()},g=async e=>{if(!(await fetch("".concat(m.env.NEXT_PUBLIC_API_URL,"/records/").concat(e),{method:"DELETE"})).ok)throw Error("Error al eliminar el registro")};function b(){let[e,a]=(0,d.useState)(!1),[n,i]=(0,d.useState)(""),[c,o]=(0,d.useState)([]),[m,b]=(0,d.useState)({brand:"",location:"",candidate:"",id:null}),[u,x]=(0,d.useState)(null);(0,d.useEffect)(()=>{!async function(){try{let e=await _();o(e)}catch(e){i(e.message),setTimeout(()=>{i("")},2e3)}}()},[]);let j=()=>{a(e=>!e),v(),x(null)},v=()=>{b({brand:"",location:"",candidate:"",id:null})},p=e=>{let{id:a,value:n}=e.target;b({...m,[a]:n})},C=async e=>{e.preventDefault();try{let e=await h(m);m.id?o(c.map(a=>a.id===e.id?e:a)):o([e,...c]);let n=await _();o(n),v(),a(!1),x(null)}catch(e){i(e.message),setTimeout(()=>{i("")},2e3)}},f=e=>{b({brand:e.brand,location:e.location,candidate:e.candidate,id:e.id}),a(!0),x(e.id)},w=async e=>{if(confirm("\xbfEst\xe1s seguro de que deseas eliminar este registro?"))try{await g(e);let a=await _();o(a)}catch(e){i(e.message),setTimeout(()=>{i("")},2e3)}};return(0,t.jsxs)("div",{className:s().container,children:[(0,t.jsx)(l(),{className:s().back,href:"/",children:(0,t.jsx)(r(),{src:"/images/arrow-left.svg",alt:"arrow-right",width:40,height:40})}),(0,t.jsxs)("form",{className:"".concat(s().card," ").concat(e&&s().cardExpanded),children:[(0,t.jsx)("div",{onClick:j,className:s().createAction,children:(0,t.jsx)(r(),{src:"/images/icon_crear.svg",alt:"create icon",width:20,height:20})}),(0,t.jsxs)("div",{className:s().brandContainer,children:[(0,t.jsx)("label",{htmlFor:"brand",className:s().label,children:(0,t.jsx)(r(),{src:e?"/images/Icon_vehiculo1.svg":"/images/Icon_vehiculo.svg",alt:"",width:30,height:30})}),(0,t.jsx)("input",{disabled:!e,value:m.brand,onChange:p,id:"brand",className:s().input})]}),(0,t.jsxs)("div",{className:s().locationContainer,children:[(0,t.jsx)("label",{htmlFor:"location",className:s().label,children:(0,t.jsx)(r(),{src:e?"/images/Icon_puntoubicacion1.svg":"/images/Icon_puntoubicacion.svg",alt:"",width:30,height:30})}),(0,t.jsx)("input",{disabled:!e,value:m.location,onChange:p,id:"location",className:s().input})]}),(0,t.jsxs)("div",{className:s().nameContainer,children:[(0,t.jsx)("label",{htmlFor:"candidate",className:s().label,children:(0,t.jsx)(r(),{src:e?"/images/Icon_persona1.svg":"/images/Icon_persona.svg",alt:"",width:30,height:30})}),(0,t.jsx)("input",{disabled:!e,value:m.candidate,onChange:p,id:"candidate",className:s().input})]}),(0,t.jsxs)("div",{className:"".concat(s().btnContent," ").concat(e&&s().visible),"data-active":e,children:[m.id?(0,t.jsx)(r(),{src:"/images/Icon_cancelar.svg",onClick:j,style:{cursor:"pointer"},alt:"",width:22,height:22}):(0,t.jsx)("button",{type:"button",onClick:j,className:"".concat(s().btn," ").concat(s().btnCancel),children:"Cancelar"}),m.id?(0,t.jsx)(r(),{src:"/images/Icon_confirmar.svg",onClick:C,style:{cursor:"pointer"},alt:"",width:22,height:22}):(0,t.jsx)("button",{onClick:C,type:"submit",className:"".concat(s().btn," ").concat(s().btnCreate),children:"Crear"})]})]}),(0,t.jsxs)("div",{className:s().tableContainer,children:[c?(0,t.jsxs)("table",{className:s().table,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Marca"}),(0,t.jsx)("th",{children:"Sucursal"}),(0,t.jsx)("th",{colSpan:"2",children:"Aspirante"})]})}),(0,t.jsx)("tbody",{children:c.map((a,n)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:a.brand}),(0,t.jsx)("td",{children:a.location}),(0,t.jsx)("td",{children:(0,t.jsx)("label",{children:a.candidate})}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{children:[(0,t.jsx)(r(),{className:s().btnActionTable,src:u!==a.id&&e?"/images/Icon_editar.svg":"/images/Icon_editar1.svg",alt:"edit",width:25,height:25,onClick:()=>!e&&f(a)}),(0,t.jsx)(r(),{className:s().btnActionTable,src:u!==a.id&&e?"/images/Icon_eliminar.svg":"/images/Icon_eliminar1.svg",alt:"delete",width:25,height:25,onClick:()=>!e&&w(a.id)})]})})]},n))})]}):null,n&&(0,t.jsx)("p",{className:s().error,children:n})]}),(0,t.jsx)("div",{className:s().contentBottom,children:(0,t.jsx)(r(),{src:"/images/Imagologotipo_motion.svg",alt:"logo type",width:200,height:350})})]})}},2289:e=>{e.exports={container:"management_container__QMw91",back:"management_back__Ki_Wy",card:"management_card__qXA_J",cardExpanded:"management_cardExpanded__bZMux",createAction:"management_createAction__kxs_I",brandContainer:"management_brandContainer__mJOvf",locationContainer:"management_locationContainer__SlJkA",nameContainer:"management_nameContainer__1Ox8U",input:"management_input__2KKm0",btnContent:"management_btnContent__igZZt",showTransition:"management_showTransition__pX3Lz",hideTransition:"management_hideTransition__DddTR",visible:"management_visible__9F1K7",btn:"management_btn__i85Y2",btnCancel:"management_btnCancel__6MBob",btnCreate:"management_btnCreate__yVf1T",tableContainer:"management_tableContainer__FIXxy",table:"management_table__zwyVs",btnActionTable:"management_btnActionTable__wDiRP",contentBottom:"management_contentBottom__XP7wP",error:"management_error__oZauF"}}},e=>{var a=a=>e(e.s=a);e.O(0,[399,30,130,215,744],()=>a(6132)),_N_E=e.O()}]);